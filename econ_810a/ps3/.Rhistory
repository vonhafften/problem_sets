year,
age,
cohort,
income = income,
treatment_lead_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment))%>%
filter(!is.na(income))
analysis_sample <- bind_rows(sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + as.factor(id) | id, data = analysis_sample)
distributed_lags <- feols(income ~ treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 | id, data = analysis_sample)
distributed_lags
distributed_lags <- feols(income ~ treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 | c(id, year), data = analysis_sample)
summary(distributed_lags)
# income lags/leads
sample_panel$income_lead_5 <- plm::lead(sample_panel$income, k=5L)
sample_panel$income_lead_4 <- plm::lead(sample_panel$income, k=4L)
sample_panel$income_lead_3 <- plm::lead(sample_panel$income, k=3L)
sample_panel$income_lead_2 <- plm::lead(sample_panel$income, k=2L)
sample_panel$income_lead_1 <- plm::lead(sample_panel$income, k=1L)
sample_panel$income_lag_1 <- plm::lag(sample_panel$income, k=1L)
sample_panel$income_lag_2 <- plm::lag(sample_panel$income, k=2L)
sample_panel$income_lag_3 <- plm::lag(sample_panel$income, k=3L)
sample_panel$income_lag_4 <- plm::lag(sample_panel$income, k=4L)
sample_2 <- sample_panel %>%
filter(hours_lag_1 >= 50*36,
hours_lag_2 >= 50*36,
hours_lag_3 >= 50*36,
size == size_lag) %>%
mutate(treatment = (hours < (hours_lag_1 + hours_lag_2 + hours_lag_3)/3 * .75))
summary(sample_2$treatment)
# Reorganize data by each lead/lag
sample_lag_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_4,
treatment_lag_3 = as.integer(treatment)) %>%
filter(!is.na(income))
sample_lag_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_3,
treatment_lag_3 = as.integer(treatment)) %>%
filter(!is.na(income))
sample_lag_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_2,
treatment_lag_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lag_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_1,
treatment_lag_1 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lag_0 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_0 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_1 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment))%>%
filter(!is.na(income))
sample_0 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_0 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_1 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_4 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_5 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_5 = as.integer(treatment))%>%
filter(!is.na(income))
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(id, year), data = analysis_sample)
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(id, year), data = analysis_sample)
# Reorganize data by each lead/lag
sample_lag_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_4,
treatment_lag_4 = as.integer(treatment)) %>%
filter(!is.na(income))
sample_lag_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_3,
treatment_lag_3 = as.integer(treatment)) %>%
filter(!is.na(income))
sample_lag_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_2,
treatment_lag_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lag_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_1,
treatment_lag_1 = as.integer(treatment))%>%
filter(!is.na(income))
sample_0 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_0 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_1 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_2 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_4 = as.integer(treatment))%>%
filter(!is.na(income))
sample_lead_5 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_5 = as.integer(treatment))%>%
filter(!is.na(income))
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(id, year), data = analysis_sample)
summary(distributed_lags)
distributed_lags$coefficients
-4:5
plot(x = -4:5, y = distributed_lags$coefficients)
# Reorganize data by each lead/lag
sample_lag_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_4,
treatment_lag_4 = as.integer(treatment),
k=-4) %>%
filter(!is.na(income))
sample_lag_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_3,
treatment_lag_3 = as.integer(treatment),
k=-3) %>%
filter(!is.na(income))
sample_lag_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_2,
treatment_lag_2 = as.integer(treatment),
k=-2)%>%
filter(!is.na(income))
sample_lag_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lag_1,
treatment_lag_1 = as.integer(treatment),
k=-1)%>%
filter(!is.na(income))
sample_0 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_0 = as.integer(treatment),
k=0)%>%
filter(!is.na(income))
sample_lead_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_1 = as.integer(treatment),
k=1)%>%
filter(!is.na(income))
sample_lead_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_2 = as.integer(treatment),
k=2)%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_3 = as.integer(treatment),
k=3)%>%
filter(!is.na(income))
sample_lead_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_4 = as.integer(treatment),
k=4)%>%
filter(!is.na(income))
sample_lead_5 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_lead_5 = as.integer(treatment),
k=5)%>%
filter(!is.na(income))
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, id, year), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:5, y = distributed_lags$coefficients)
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 | c(k, id, year), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:5, y = distributed_lags$coefficients)
plot(x = -4:3, y = distributed_lags$coefficients)
plot(x = -4:3, y = distributed_lags$coefficients+2000)
plot(x = -4:3, y = distributed_lags$coefficients)
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 | c(k, id), data = analysis_sample)
summary(distributed_lags)
sample_lead_5
sample_0 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income,
treatment_0 = as.integer(treatment),
k=0)%>%
filter(!is.na(income))
sample_lead_1 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lead_1,
treatment_lead_1 = as.integer(treatment),
k=1)%>%
filter(!is.na(income))
sample_lead_2 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lead_2,
treatment_lead_2 = as.integer(treatment),
k=2)%>%
filter(!is.na(income))
sample_lead_3 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lead_3,
treatment_lead_3 = as.integer(treatment),
k=3)%>%
filter(!is.na(income))
sample_lead_4 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lead_4,
treatment_lead_4 = as.integer(treatment),
k=4)%>%
filter(!is.na(income))
sample_lead_5 <- sample_2 %>%
transmute(id,
year,
age,
cohort,
income = income_lead_5,
treatment_lead_5 = as.integer(treatment),
k=5)%>%
filter(!is.na(income))
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 | c(k, id), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:3, y = distributed_lags$coefficients)
plot(x = -4:3, y = distributed_lags$coefficients)
lines(x = -4:3, y = distributed_lags$coefficients)
plot(x = -4:3, y = distributed_lags$coefficients, ylim = c(-14000, 0))
lines(x = -4:3, y = distributed_lags$coefficients)
abline(h=0)
plot(x = -4:3, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue")
lines(x = -4:3, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, id), data = analysis_sample)
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, id), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:3, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue")
lines(x = -4:3, y = distributed_lags$coefficients, col = "blue")
summary(distributed_lags)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", "Distributed Lags around Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags around Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags around Job Loss", ylab = "USD", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
png("part_1.png")
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.of()
dev.off()
png("part_1.png",width = 480, height = 360)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
png("part_1.png",width = 360, height = 240)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
png("part_1.png",width = 480, height = 360)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
50 *36
summary(sample_2$treatment)
analysis_sample <- bind_rows(sample_lag_4, sample_lag_3,sample_lag_2,sample_lag_1, sample_lag_0, sample_lead_1, sample_lead_2, sample_lead_3, sample_lead_4, sample_lead_5)
analysis_sample[is.na(analysis_sample)] <- 0
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(year, id), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, year, id), data = analysis_sample)
summary(distributed_lags)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, id), data = analysis_sample)
summary(distributed_lags)
png("part_1.png",width = 480, height = 360)
dev.off()
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
distributed_lags <- feols(income ~ treatment_lag_4 + treatment_lag_3 + treatment_lag_2 + treatment_lag_1 + treatment_0 + treatment_lead_1 + treatment_lead_2 + treatment_lead_3 + treatment_lead_4 + treatment_lead_5 | c(k, id), data = analysis_sample)
summary(distributed_lags)
png("part_1.png",width = 480, height = 360)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
png("part_1.png",width = 480, height = 320)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Distributed Lags Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
summary(distributed_lags)
-14165.41 - -14165.41
-14165.41 +-14165.41
-14165.41 +14165.41
-14165.41 +4460.53
png("part_1.png",width = 480, height = 320)
plot(x = -4:5, y = distributed_lags$coefficients, ylim = c(-14000, 0), col = "blue", main = "Earnings Loss Around Job Loss", ylab = "$", xlab = "Period Relative to Job Loss")
lines(x = -4:5, y = distributed_lags$coefficients, col = "blue")
abline(h=0)
dev.off()
